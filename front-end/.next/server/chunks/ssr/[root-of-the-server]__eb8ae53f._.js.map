{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///F:/pbl6_ql_htqt/front-end/lib/api-client.ts"],"sourcesContent":["import axios from 'axios'\r\nimport Cookies from 'js-cookie'\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api/v1'\r\n\r\n// Create axios instance\r\nconst apiClient = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n})\r\n\r\n// Request interceptor to add auth token\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const token = Cookies.get('token')\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`\r\n    }\r\n    return config\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Response interceptor to handle errors\r\napiClient.interceptors.response.use(\r\n  (response) => {\r\n    return response\r\n  },\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      // Token expired or invalid\r\n      Cookies.remove('token')\r\n      Cookies.remove('user')\r\n      if (typeof window !== 'undefined') {\r\n        window.location.href = '/login'\r\n      }\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default apiClient\r\n\r\n// API functions\r\nexport const authAPI = {\r\n  login: (email: string, password: string) =>\r\n    apiClient.post('/auth/login', { email, password }),\r\n  \r\n  register: (data: {\r\n    email: string\r\n    password: string\r\n    fullName: string\r\n    department: string\r\n  }) =>\r\n    apiClient.post('/auth/register', data),\r\n}\r\n\r\nexport const userAPI = {\r\n  getProfile: () => apiClient.get('/users/profile'),\r\n  updateProfile: (data: any) => apiClient.patch('/users/profile', data),\r\n  getUsers: () => apiClient.get('/users'),\r\n}\r\n\r\nexport const mouAPI = {\r\n  getMOUs: () => apiClient.get('/mou'),\r\n  getMOU: (id: string) => apiClient.get(`/mou/${id}`),\r\n  createMOU: (data: any) => apiClient.post('/mou', data),\r\n  updateMOU: (id: string, data: any) => apiClient.patch(`/mou/${id}`, data),\r\n  deleteMOU: (id: string) => apiClient.delete(`/mou/${id}`),\r\n}\r\n\r\nexport const visaAPI = {\r\n  getVisaApplications: () => apiClient.get('/visa'),\r\n  getMyApplications: () => apiClient.get('/visa/my-applications'),\r\n  getVisaApplication: (id: string) => apiClient.get(`/visa/${id}`),\r\n  createVisaApplication: (data: any) => apiClient.post('/visa', data),\r\n  updateVisaApplication: (id: string, data: any) => apiClient.patch(`/visa/${id}`, data),\r\n  deleteVisaApplication: (id: string) => apiClient.delete(`/visa/${id}`),\r\n}\r\n\r\nexport const visitorAPI = {\r\n  getVisitors: () => apiClient.get('/visitor'),\r\n  getVisitor: (id: string) => apiClient.get(`/visitor/${id}`),\r\n  createVisitor: (data: any) => apiClient.post('/visitor', data),\r\n  updateVisitor: (id: string, data: any) => apiClient.patch(`/visitor/${id}`, data),\r\n  deleteVisitor: (id: string) => apiClient.delete(`/visitor/${id}`),\r\n}\r\n\r\nexport const translationAPI = {\r\n  getTranslations: () => apiClient.get('/translation'),\r\n  getTranslation: (id: string) => apiClient.get(`/translation/${id}`),\r\n  createTranslation: (data: any) => apiClient.post('/translation', data),\r\n  updateTranslation: (id: string, data: any) => apiClient.patch(`/translation/${id}`, data),\r\n  deleteTranslation: (id: string) => apiClient.delete(`/translation/${id}`),\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///F:/pbl6_ql_htqt/front-end/lib/auth.ts"],"sourcesContent":["import Cookies from 'js-cookie'\r\n\r\nexport interface User {\r\n  id: string\r\n  email: string\r\n  fullName: string\r\n  role: 'admin' | 'khoa' | 'phong' | 'user'\r\n  department?: string\r\n  avatar?: string\r\n}\r\n\r\nexport const authHelpers = {\r\n  // Get token from cookies\r\n  getToken: (): string | null => {\r\n    if (typeof window !== 'undefined') {\r\n      return Cookies.get('token') || null\r\n    }\r\n    return null\r\n  },\r\n\r\n  // Set token in cookies\r\n  setToken: (token: string): void => {\r\n    Cookies.set('token', token, { expires: 7 }) // 7 days\r\n  },\r\n\r\n  // Remove token from cookies\r\n  removeToken: (): void => {\r\n    Cookies.remove('token')\r\n    Cookies.remove('user')\r\n  },\r\n\r\n  // Get user info from cookies\r\n  getUser: (): User | null => {\r\n    if (typeof window !== 'undefined') {\r\n      const userStr = Cookies.get('user')\r\n      if (userStr) {\r\n        try {\r\n          return JSON.parse(userStr)\r\n        } catch (error) {\r\n          console.error('Error parsing user data:', error)\r\n          return null\r\n        }\r\n      }\r\n    }\r\n    return null\r\n  },\r\n\r\n  // Set user info in cookies\r\n  setUser: (user: User): void => {\r\n    Cookies.set('user', JSON.stringify(user), { expires: 7 })\r\n  },\r\n\r\n  // Check if user is authenticated\r\n  isAuthenticated: (): boolean => {\r\n    return !!authHelpers.getToken()\r\n  },\r\n\r\n  // Check if user has specific role\r\n  hasRole: (role: User['role']): boolean => {\r\n    const user = authHelpers.getUser()\r\n    return user?.role === role\r\n  },\r\n\r\n  // Check if user has any of the specified roles\r\n  hasAnyRole: (roles: User['role'][]): boolean => {\r\n    const user = authHelpers.getUser()\r\n    return user ? roles.includes(user.role) : false\r\n  },\r\n\r\n  // Logout user\r\n  logout: (): void => {\r\n    authHelpers.removeToken()\r\n    if (typeof window !== 'undefined') {\r\n      window.location.href = '/login'\r\n    }\r\n  },\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAWO,MAAM,cAAc;IACzB,yBAAyB;IACzB,UAAU;QACR;;QAGA,OAAO;IACT;IAEA,uBAAuB;IACvB,UAAU,CAAC;QACT,qJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,SAAS,OAAO;YAAE,SAAS;QAAE,IAAG,SAAS;IACvD;IAEA,4BAA4B;IAC5B,aAAa;QACX,qJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;QACf,qJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;IACjB;IAEA,6BAA6B;IAC7B,SAAS;QACP;;QAWA,OAAO;IACT;IAEA,2BAA2B;IAC3B,SAAS,CAAC;QACR,qJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,SAAS,CAAC,OAAO;YAAE,SAAS;QAAE;IACzD;IAEA,iCAAiC;IACjC,iBAAiB;QACf,OAAO,CAAC,CAAC,YAAY,QAAQ;IAC/B;IAEA,kCAAkC;IAClC,SAAS,CAAC;QACR,MAAM,OAAO,YAAY,OAAO;QAChC,OAAO,MAAM,SAAS;IACxB;IAEA,+CAA+C;IAC/C,YAAY,CAAC;QACX,MAAM,OAAO,YAAY,OAAO;QAChC,OAAO,OAAO,MAAM,QAAQ,CAAC,KAAK,IAAI,IAAI;IAC5C;IAEA,cAAc;IACd,QAAQ;QACN,YAAY,WAAW;QACvB;;IAGF;AACF","debugId":null}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["file:///F:/pbl6_ql_htqt/front-end/app/login/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { authAPI } from '@/lib/api-client'\r\nimport { authHelpers } from '@/lib/auth'\r\n\r\nexport default function LoginPage() {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState('')\r\n  const router = useRouter()\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setIsLoading(true)\r\n    setError('')\r\n\r\n    try {\r\n      const response = await authAPI.login(email, password)\r\n      const { access_token, user } = response.data\r\n\r\n      // Store token and user info\r\n      authHelpers.setToken(access_token)\r\n      authHelpers.setUser(user)\r\n\r\n      // Redirect to dashboard\r\n      router.push('/dashboard')\r\n    } catch (error: any) {\r\n      setError(error.response?.data?.message || 'Đăng nhập thất bại')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        <div>\r\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n            Đăng nhập hệ thống\r\n          </h2>\r\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n            PBL6 - Hệ thống Quản lý Hợp tác Quốc tế\r\n          </p>\r\n        </div>\r\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\r\n          <div className=\"rounded-md shadow-sm -space-y-px\">\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"sr-only\">\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                autoComplete=\"email\"\r\n                required\r\n                className=\"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                placeholder=\"Địa chỉ email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"sr-only\">\r\n                Mật khẩu\r\n              </label>\r\n              <input\r\n                id=\"password\"\r\n                name=\"password\"\r\n                type=\"password\"\r\n                autoComplete=\"current-password\"\r\n                required\r\n                className=\"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                placeholder=\"Mật khẩu\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"text-red-600 text-sm text-center\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <div>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {isLoading ? 'Đang đăng nhập...' : 'Đăng nhập'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,aAAa;QACb,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,oHAAA,CAAA,UAAO,CAAC,KAAK,CAAC,OAAO;YAC5C,MAAM,EAAE,YAAY,EAAE,IAAI,EAAE,GAAG,SAAS,IAAI;YAE5C,4BAA4B;YAC5B,2GAAA,CAAA,cAAW,CAAC,QAAQ,CAAC;YACrB,2GAAA,CAAA,cAAW,CAAC,OAAO,CAAC;YAEpB,wBAAwB;YACxB,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAY;YACnB,SAAS,MAAM,QAAQ,EAAE,MAAM,WAAW;QAC5C,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;;sCACC,8OAAC;4BAAG,WAAU;sCAAyD;;;;;;sCAGvE,8OAAC;4BAAE,WAAU;sCAAyC;;;;;;;;;;;;8BAIxD,8OAAC;oBAAK,WAAU;oBAAiB,UAAU;;sCACzC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAQ,WAAU;sDAAU;;;;;;sDAG3C,8OAAC;4CACC,IAAG;4CACH,MAAK;4CACL,MAAK;4CACL,cAAa;4CACb,QAAQ;4CACR,WAAU;4CACV,aAAY;4CACZ,OAAO;4CACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;8CAG5C,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAW,WAAU;sDAAU;;;;;;sDAG9C,8OAAC;4CACC,IAAG;4CACH,MAAK;4CACL,MAAK;4CACL,cAAa;4CACb,QAAQ;4CACR,WAAU;4CACV,aAAY;4CACZ,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;wBAKhD,uBACC,8OAAC;4BAAI,WAAU;sCACZ;;;;;;sCAIL,8OAAC;sCACC,cAAA,8OAAC;gCACC,MAAK;gCACL,UAAU;gCACV,WAAU;0CAET,YAAY,sBAAsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOjD","debugId":null}}]
}