{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///F:/pbl6_ql_htqt/front-end/src/lib/api-client.ts"],"sourcesContent":["import axios from 'axios'\r\n\r\n// Create axios instance with default config\r\nconst apiClient = axios.create({\r\n  baseURL: 'http://localhost:3001/api/v1',\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n})\r\n\r\n// Add request interceptor to include auth token\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token')\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`\r\n    }\r\n    return config\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Add response interceptor to handle errors\r\napiClient.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      // Token expired or invalid\r\n      localStorage.removeItem('token')\r\n      localStorage.removeItem('user')\r\n      window.location.href = '/login'\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Auth API\r\nexport const authAPI = {\r\n  login: async (email: string, password: string) => {\r\n    const response = await apiClient.post('/auth/login', {\r\n      email,\r\n      password,\r\n    })\r\n    return response.data\r\n  },\r\n  \r\n  loginByUsername: async (username: string, password: string) => {\r\n    const response = await apiClient.post('/auth/login', {\r\n      username,\r\n      password,\r\n    })\r\n    return response.data\r\n  },\r\n  \r\n  logout: async () => {\r\n    const response = await apiClient.post('/auth/logout')\r\n    return response.data\r\n  },\r\n  \r\n  getProfile: async () => {\r\n    const response = await apiClient.get('/auth/profile')\r\n    return response.data\r\n  },\r\n  \r\n  refreshToken: async () => {\r\n    const response = await apiClient.post('/auth/refresh')\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Users API\r\nexport const usersAPI = {\r\n  getUsers: async () => {\r\n    const response = await apiClient.get('/users')\r\n    return response.data\r\n  },\r\n  \r\n  getUser: async (id: string) => {\r\n    const response = await apiClient.get(`/users/${id}`)\r\n    return response.data\r\n  },\r\n  \r\n  createUser: async (userData: any) => {\r\n    const response = await apiClient.post('/users', userData)\r\n    return response.data\r\n  },\r\n  \r\n  updateUser: async (id: string, userData: any) => {\r\n    const response = await apiClient.put(`/users/${id}`, userData)\r\n    return response.data\r\n  },\r\n  \r\n  deleteUser: async (id: string) => {\r\n    const response = await apiClient.delete(`/users/${id}`)\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Visitors API\r\nexport const visitorsAPI = {\r\n  getVisitors: async () => {\r\n    const response = await apiClient.get('/visitors')\r\n    return response.data\r\n  },\r\n  \r\n  getVisitor: async (id: string) => {\r\n    const response = await apiClient.get(`/visitors/${id}`)\r\n    return response.data\r\n  },\r\n  \r\n  createVisitor: async (visitorData: any) => {\r\n    const response = await apiClient.post('/visitors', visitorData)\r\n    return response.data\r\n  },\r\n  \r\n  updateVisitor: async (id: string, visitorData: any) => {\r\n    const response = await apiClient.put(`/visitors/${id}`, visitorData)\r\n    return response.data\r\n  },\r\n  \r\n  deleteVisitor: async (id: string) => {\r\n    const response = await apiClient.delete(`/visitors/${id}`)\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Translation Requests API\r\nexport const translationAPI = {\r\n  getTranslationRequests: async () => {\r\n    const response = await apiClient.get('/translation-requests')\r\n    return response.data\r\n  },\r\n  \r\n  getTranslationRequest: async (id: string) => {\r\n    const response = await apiClient.get(`/translation-requests/${id}`)\r\n    return response.data\r\n  },\r\n  \r\n  createTranslationRequest: async (requestData: any) => {\r\n    const response = await apiClient.post('/translation-requests', requestData)\r\n    return response.data\r\n  },\r\n  \r\n  updateTranslationRequest: async (id: string, requestData: any) => {\r\n    const response = await apiClient.put(`/translation-requests/${id}`, requestData)\r\n    return response.data\r\n  },\r\n  \r\n  deleteTranslationRequest: async (id: string) => {\r\n    const response = await apiClient.delete(`/translation-requests/${id}`)\r\n    return response.data\r\n  },\r\n}\r\n\r\nexport default apiClient"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///F:/pbl6_ql_htqt/front-end/src/lib/auth.ts"],"sourcesContent":["export const authHelpers = {\r\n  // Token management\r\n  setToken: (token: string) => {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem('token', token)\r\n      // Also set as cookie for middleware\r\n      document.cookie = `token=${token}; path=/; max-age=86400` // 24 hours\r\n    }\r\n  },\r\n  \r\n  getToken: () => {\r\n    if (typeof window !== 'undefined') {\r\n      return localStorage.getItem('token')\r\n    }\r\n    return null\r\n  },\r\n  \r\n  removeToken: () => {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.removeItem('token')\r\n      // Remove cookie\r\n      document.cookie = 'token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT'\r\n    }\r\n  },\r\n  \r\n  // User management\r\n  setUser: (user: any) => {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem('user', JSON.stringify(user))\r\n      // Also set as cookie for middleware\r\n      document.cookie = `user=${encodeURIComponent(JSON.stringify(user))}; path=/; max-age=86400` // 24 hours\r\n    }\r\n  },\r\n  \r\n  getUser: () => {\r\n    if (typeof window !== 'undefined') {\r\n      const userStr = localStorage.getItem('user')\r\n      return userStr ? JSON.parse(userStr) : null\r\n    }\r\n    return null\r\n  },\r\n  \r\n  removeUser: () => {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.removeItem('user')\r\n      // Remove cookie\r\n      document.cookie = 'user=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT'\r\n    }\r\n  },\r\n  \r\n  // Authentication checks\r\n  isAuthenticated: () => {\r\n    // Check if user is authenticated by looking for token in localStorage\r\n    if (typeof window !== 'undefined') {\r\n      return !!localStorage.getItem('token')\r\n    }\r\n    return false\r\n  },\r\n  \r\n  requireAuth: () => {\r\n    return { isLoading: false, user: null }\r\n  },\r\n  \r\n  // Role and permission checks\r\n  hasRole: (requiredRole: string, userRole?: string) => {\r\n    return userRole === requiredRole || userRole === 'admin'\r\n  },\r\n  \r\n  hasPermission: (permission: string, userRole?: string) => {\r\n    // Simple permission check - admin has all permissions\r\n    return userRole === 'admin'\r\n  },\r\n  \r\n  // Mock login for demo (keeping this for backward compatibility)\r\n  mockLogin: (role: string) => {\r\n    const mockUser = {\r\n      id: 1,\r\n      username: 'demo_user',\r\n      email: 'demo@example.com',\r\n      role: role,\r\n      name: 'Demo User'\r\n    }\r\n    const mockToken = 'mock_token_' + Date.now()\r\n    \r\n    authHelpers.setToken(mockToken)\r\n    authHelpers.setUser(mockUser)\r\n  },\r\n  \r\n  // Logout\r\n  logout: () => {\r\n    authHelpers.removeToken()\r\n    authHelpers.removeUser()\r\n    if (typeof window !== 'undefined') {\r\n      window.location.href = '/login'\r\n    }\r\n  }\r\n}\r\n\r\nexport default authHelpers\r\n"],"names":[],"mappings":";;;;AAAO,MAAM,cAAc;IACzB,mBAAmB;IACnB,UAAU,CAAC;QACT,wCAAmC;YACjC,aAAa,OAAO,CAAC,SAAS;YAC9B,oCAAoC;YACpC,SAAS,MAAM,GAAG,AAAC,SAAc,OAAN,OAAM,4BAAyB,WAAW;QACvE;IACF;IAEA,UAAU;QACR,wCAAmC;YACjC,OAAO,aAAa,OAAO,CAAC;QAC9B;;;IAEF;IAEA,aAAa;QACX,wCAAmC;YACjC,aAAa,UAAU,CAAC;YACxB,gBAAgB;YAChB,SAAS,MAAM,GAAG;QACpB;IACF;IAEA,kBAAkB;IAClB,SAAS,CAAC;QACR,wCAAmC;YACjC,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;YAC5C,oCAAoC;YACpC,SAAS,MAAM,GAAG,AAAC,QAAgD,OAAzC,mBAAmB,KAAK,SAAS,CAAC,QAAO,4BAAyB,WAAW;QACzG;IACF;IAEA,SAAS;QACP,wCAAmC;YACjC,MAAM,UAAU,aAAa,OAAO,CAAC;YACrC,OAAO,UAAU,KAAK,KAAK,CAAC,WAAW;QACzC;;;IAEF;IAEA,YAAY;QACV,wCAAmC;YACjC,aAAa,UAAU,CAAC;YACxB,gBAAgB;YAChB,SAAS,MAAM,GAAG;QACpB;IACF;IAEA,wBAAwB;IACxB,iBAAiB;QACf,sEAAsE;QACtE,wCAAmC;YACjC,OAAO,CAAC,CAAC,aAAa,OAAO,CAAC;QAChC;;;IAEF;IAEA,aAAa;QACX,OAAO;YAAE,WAAW;YAAO,MAAM;QAAK;IACxC;IAEA,6BAA6B;IAC7B,SAAS,CAAC,cAAsB;QAC9B,OAAO,aAAa,gBAAgB,aAAa;IACnD;IAEA,eAAe,CAAC,YAAoB;QAClC,sDAAsD;QACtD,OAAO,aAAa;IACtB;IAEA,gEAAgE;IAChE,WAAW,CAAC;QACV,MAAM,WAAW;YACf,IAAI;YACJ,UAAU;YACV,OAAO;YACP,MAAM;YACN,MAAM;QACR;QACA,MAAM,YAAY,gBAAgB,KAAK,GAAG;QAE1C,YAAY,QAAQ,CAAC;QACrB,YAAY,OAAO,CAAC;IACtB;IAEA,SAAS;IACT,QAAQ;QACN,YAAY,WAAW;QACvB,YAAY,UAAU;QACtB,wCAAmC;YACjC,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;IACF;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///F:/pbl6_ql_htqt/front-end/src/hooks/usePermissions.ts"],"sourcesContent":["import { authHelpers } from '@/lib/auth';\r\n\r\n// Frontend role constants matching backend\r\nexport const UserRole = {\r\n  ADMIN: 'admin',\r\n  USER: 'user', \r\n  STUDENT: 'student',\r\n  SPECIALIST: 'specialist',\r\n  MANAGER: 'manager',\r\n  VIEWER: 'viewer',\r\n  SYSTEM: 'system',\r\n} as const;\r\n\r\nexport type UserRoleType = typeof UserRole[keyof typeof UserRole];\r\n\r\n// Permission interface\r\nexport interface Permission {\r\n  // User Management\r\n  USER_CREATE: 'user:create';\r\n  USER_READ: 'user:read';\r\n  USER_UPDATE: 'user:update';\r\n  USER_DELETE: 'user:delete';\r\n  USER_ASSIGN_ROLE: 'user:assign_role';\r\n\r\n  // System Configuration\r\n  SYSTEM_CONFIG: 'system:config';\r\n  SYSTEM_BACKUP: 'system:backup';\r\n  SYSTEM_LOGS: 'system:logs';\r\n\r\n  // Visa Management\r\n  VISA_CREATE: 'visa:create';\r\n  VISA_READ: 'visa:read';\r\n  VISA_UPDATE: 'visa:update';\r\n  VISA_DELETE: 'visa:delete';\r\n  VISA_REVIEW: 'visa:review';\r\n  VISA_APPROVE: 'visa:approve';\r\n  VISA_REJECT: 'visa:reject';\r\n  VISA_ASSIGN: 'visa:assign';\r\n  VISA_EXPORT: 'visa:export';\r\n\r\n  // MOU Management\r\n  MOU_CREATE: 'mou:create';\r\n  MOU_READ: 'mou:read';\r\n  MOU_UPDATE: 'mou:update';\r\n  MOU_DELETE: 'mou:delete';\r\n  MOU_REVIEW: 'mou:review';\r\n  MOU_APPROVE: 'mou:approve';\r\n  MOU_SIGN: 'mou:sign';\r\n  MOU_TERMINATE: 'mou:terminate';\r\n  MOU_ASSIGN: 'mou:assign';\r\n  MOU_EXPORT: 'mou:export';\r\n\r\n  // Translation Management\r\n  TRANSLATION_CREATE: 'translation:create';\r\n  TRANSLATION_READ: 'translation:read';\r\n  TRANSLATION_UPDATE: 'translation:update';\r\n  TRANSLATION_DELETE: 'translation:delete';\r\n  TRANSLATION_REVIEW: 'translation:review';\r\n  TRANSLATION_APPROVE: 'translation:approve';\r\n  TRANSLATION_CERTIFY: 'translation:certify';\r\n\r\n  // Visitor Management\r\n  VISITOR_CREATE: 'visitor:create';\r\n  VISITOR_READ: 'visitor:read';\r\n  VISITOR_UPDATE: 'visitor:update';\r\n  VISITOR_DELETE: 'visitor:delete';\r\n  VISITOR_APPROVE: 'visitor:approve';\r\n  VISITOR_EXPORT: 'visitor:export';\r\n\r\n  // Reports\r\n  REPORT_VIEW: 'report:view';\r\n  REPORT_EXPORT: 'report:export';\r\n  REPORT_STATS: 'report:stats';\r\n\r\n  // Notifications\r\n  NOTIFICATION_SEND: 'notification:send';\r\n  NOTIFICATION_MANAGE: 'notification:manage';\r\n\r\n  // Data Access\r\n  DATA_VIEW_ALL: 'data:view_all';\r\n  DATA_VIEW_DEPARTMENT: 'data:view_department';\r\n  DATA_VIEW_OWN: 'data:view_own';\r\n  DATA_VIEW_PUBLIC: 'data:view_public';\r\n}\r\n\r\n// Role-Permission Mapping (matching backend)\r\nconst ROLE_PERMISSIONS: Record<UserRoleType, string[]> = {\r\n  [UserRole.ADMIN]: [\r\n    // Full system access\r\n    'user:create', 'user:read', 'user:update', 'user:delete', 'user:assign_role',\r\n    'system:config', 'system:backup', 'system:logs',\r\n    'data:view_all', 'report:view', 'report:export', 'report:stats',\r\n    'notification:manage',\r\n    // All module permissions\r\n    'visa:create', 'visa:read', 'visa:update', 'visa:delete', 'visa:review', \r\n    'visa:approve', 'visa:reject', 'visa:assign', 'visa:export',\r\n    'mou:create', 'mou:read', 'mou:update', 'mou:delete', 'mou:review',\r\n    'mou:approve', 'mou:sign', 'mou:terminate', 'mou:assign', 'mou:export',\r\n    'translation:create', 'translation:read', 'translation:update', 'translation:delete',\r\n    'translation:review', 'translation:approve', 'translation:certify',\r\n    'visitor:create', 'visitor:read', 'visitor:update', 'visitor:delete',\r\n    'visitor:approve', 'visitor:export',\r\n  ],\r\n\r\n  [UserRole.USER]: [\r\n    // Department level access\r\n    'data:view_department',\r\n    'visa:create', 'visa:read', 'visa:update',\r\n    'mou:create', 'mou:read', 'mou:update',\r\n    'translation:create', 'translation:read', 'translation:update',\r\n    'visitor:create', 'visitor:read', 'visitor:update',\r\n  ],\r\n\r\n  [UserRole.STUDENT]: [\r\n    // Own data only access\r\n    'data:view_own',\r\n    'visa:create', 'visa:read', 'visa:update',\r\n  ],\r\n\r\n  [UserRole.SPECIALIST]: [\r\n    // Processing and review access\r\n    'data:view_all',\r\n    'visa:read', 'visa:review', 'visa:assign',\r\n    'mou:read', 'mou:review', 'mou:assign',\r\n    'translation:read', 'translation:review', 'translation:certify',\r\n    'visitor:read', 'visitor:update',\r\n    'report:view', 'report:export',\r\n  ],\r\n\r\n  [UserRole.MANAGER]: [\r\n    // Approval level access\r\n    'data:view_all',\r\n    'visa:read', 'visa:approve', 'visa:reject', 'visa:export',\r\n    'mou:read', 'mou:approve', 'mou:sign', 'mou:terminate', 'mou:export',\r\n    'translation:read', 'translation:approve',\r\n    'visitor:read', 'visitor:approve', 'visitor:export',\r\n    'report:view', 'report:export', 'report:stats',\r\n  ],\r\n\r\n  [UserRole.VIEWER]: [\r\n    // Read-only public access\r\n    'data:view_public',\r\n    'visa:read', 'mou:read', 'translation:read', 'visitor:read',\r\n    'report:view',\r\n  ],\r\n\r\n  [UserRole.SYSTEM]: [\r\n    // System automation access\r\n    'notification:send',\r\n    'data:view_all',\r\n    'visa:read', 'mou:read',\r\n  ],\r\n};\r\n\r\nexport const usePermissions = () => {\r\n  const user = authHelpers.getUser();\r\n\r\n  /**\r\n   * Check if current user has a specific permission\r\n   */\r\n  const hasPermission = (permission: string): boolean => {\r\n    if (!user?.role) return false;\r\n    const userPermissions = ROLE_PERMISSIONS[user.role as UserRoleType] || [];\r\n    return userPermissions.includes(permission);\r\n  };\r\n\r\n  /**\r\n   * Check if current user has any of the specified permissions\r\n   */\r\n  const hasAnyPermission = (permissions: string[]): boolean => {\r\n    if (!user?.role) return false;\r\n    const userPermissions = ROLE_PERMISSIONS[user.role as UserRoleType] || [];\r\n    return permissions.some(permission => userPermissions.includes(permission));\r\n  };\r\n\r\n  /**\r\n   * Check if current user has all of the specified permissions\r\n   */\r\n  const hasAllPermissions = (permissions: string[]): boolean => {\r\n    if (!user?.role) return false;\r\n    const userPermissions = ROLE_PERMISSIONS[user.role as UserRoleType] || [];\r\n    return permissions.every(permission => userPermissions.includes(permission));\r\n  };\r\n\r\n  /**\r\n   * Check if user can access data based on role and data scope\r\n   */\r\n  const canAccessData = (dataScope: 'own' | 'department' | 'all' | 'public'): boolean => {\r\n    switch (dataScope) {\r\n      case 'own':\r\n        return hasAnyPermission(['data:view_own', 'data:view_department', 'data:view_all']);\r\n      case 'department':\r\n        return hasAnyPermission(['data:view_department', 'data:view_all']);\r\n      case 'all':\r\n        return hasPermission('data:view_all');\r\n      case 'public':\r\n        return hasAnyPermission(['data:view_public', 'data:view_own', 'data:view_department', 'data:view_all']);\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Check if user can perform action on specific module\r\n   */\r\n  const canAccessModule = (\r\n    module: 'visa' | 'mou' | 'translation' | 'visitor',\r\n    action: 'create' | 'read' | 'update' | 'delete' | 'review' | 'approve'\r\n  ): boolean => {\r\n    const permission = `${module}:${action}`;\r\n    return hasPermission(permission);\r\n  };\r\n\r\n  /**\r\n   * Get user role display name in Vietnamese\r\n   */\r\n  const getRoleDisplayName = (role?: UserRoleType): string => {\r\n    const roleNames = {\r\n      [UserRole.ADMIN]: 'Admin CNTT',\r\n      [UserRole.USER]: 'Người dùng cơ sở',\r\n      [UserRole.STUDENT]: 'Sinh viên/Học viên quốc tế',\r\n      [UserRole.SPECIALIST]: 'Chuyên viên HTQT/KHCN&ĐN',\r\n      [UserRole.MANAGER]: 'Lãnh đạo Phòng',\r\n      [UserRole.VIEWER]: 'Người dùng tra cứu',\r\n      [UserRole.SYSTEM]: 'Hệ thống',\r\n    };\r\n    \r\n    return roleNames[role as UserRoleType] || role || 'Không xác định';\r\n  };\r\n\r\n  /**\r\n   * Check specific role-based actions\r\n   */\r\n  const can = {\r\n    // User management\r\n    createUser: () => hasPermission('user:create'),\r\n    manageUsers: () => hasPermission('user:read'),\r\n    assignRoles: () => hasPermission('user:assign_role'),\r\n    \r\n    // System\r\n    configureSystem: () => hasPermission('system:config'),\r\n    viewSystemLogs: () => hasPermission('system:logs'),\r\n    \r\n    // MOU\r\n    createMOU: () => hasPermission('mou:create'),\r\n    viewMOU: () => hasPermission('mou:read'),\r\n    editMOU: () => hasPermission('mou:update'),\r\n    deleteMOU: () => hasPermission('mou:delete'),\r\n    reviewMOU: () => hasPermission('mou:review'),\r\n    approveMOU: () => hasPermission('mou:approve'),\r\n    signMOU: () => hasPermission('mou:sign'),\r\n    terminateMOU: () => hasPermission('mou:terminate'),\r\n    exportMOU: () => hasPermission('mou:export'),\r\n    \r\n    // Visa\r\n    createVisa: () => hasPermission('visa:create'),\r\n    viewVisa: () => hasPermission('visa:read'),\r\n    editVisa: () => hasPermission('visa:update'),\r\n    deleteVisa: () => hasPermission('visa:delete'),\r\n    reviewVisa: () => hasPermission('visa:review'),\r\n    approveVisa: () => hasPermission('visa:approve'),\r\n    rejectVisa: () => hasPermission('visa:reject'),\r\n    exportVisa: () => hasPermission('visa:export'),\r\n    \r\n    // Translation\r\n    createTranslation: () => hasPermission('translation:create'),\r\n    viewTranslation: () => hasPermission('translation:read'),\r\n    editTranslation: () => hasPermission('translation:update'),\r\n    deleteTranslation: () => hasPermission('translation:delete'),\r\n    reviewTranslation: () => hasPermission('translation:review'),\r\n    approveTranslation: () => hasPermission('translation:approve'),\r\n    certifyTranslation: () => hasPermission('translation:certify'),\r\n    \r\n    // Visitor\r\n    createVisitor: () => hasPermission('visitor:create'),\r\n    viewVisitor: () => hasPermission('visitor:read'),\r\n    editVisitor: () => hasPermission('visitor:update'),\r\n    deleteVisitor: () => hasPermission('visitor:delete'),\r\n    approveVisitor: () => hasPermission('visitor:approve'),\r\n    exportVisitor: () => hasPermission('visitor:export'),\r\n    \r\n    // Reports\r\n    viewReports: () => hasPermission('report:view'),\r\n    exportReports: () => hasPermission('report:export'),\r\n    viewStatistics: () => hasPermission('report:stats'),\r\n  };\r\n\r\n  return {\r\n    hasPermission,\r\n    hasAnyPermission,\r\n    hasAllPermissions,\r\n    canAccessData,\r\n    canAccessModule,\r\n    getRoleDisplayName,\r\n    can,\r\n    userRole: user?.role as UserRoleType,\r\n    isAdmin: user?.role === UserRole.ADMIN,\r\n    isUser: user?.role === UserRole.USER,\r\n    isStudent: user?.role === UserRole.STUDENT,\r\n    isSpecialist: user?.role === UserRole.SPECIALIST,\r\n    isManager: user?.role === UserRole.MANAGER,\r\n    isViewer: user?.role === UserRole.VIEWER,\r\n    isSystem: user?.role === UserRole.SYSTEM,\r\n  };\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 545, "column": 0}, "map": {"version":3,"sources":["file:///F:/pbl6_ql_htqt/front-end/src/lib/role-navigation.ts"],"sourcesContent":["import { UserRole, UserRoleType } from '@/hooks/usePermissions';\n\n/**\n * Get the appropriate dashboard URL based on user role\n */\nexport const getDashboardUrl = (userRole: UserRoleType): string => {\n  switch (userRole) {\n    case UserRole.ADMIN:\n      return '/dashboard/admin';\n    case UserRole.STUDENT:\n      return '/dashboard/student';\n    case UserRole.SPECIALIST:\n      return '/dashboard/specialist';\n    case UserRole.MANAGER:\n      return '/dashboard/manager';\n    case UserRole.VIEWER:\n      return '/dashboard/viewer';\n    case UserRole.USER:\n    default:\n      return '/dashboard';\n  }\n};\n\n/**\n * Get the default landing page URLs for each role\n */\nexport const getRoleLandingPages = () => ({\n  [UserRole.ADMIN]: {\n    primary: '/dashboard/admin',\n    secondary: '/dashboard/admin/users',\n    description: 'Quản lý hệ thống'\n  },\n  [UserRole.USER]: {\n    primary: '/dashboard',\n    secondary: '/dashboard/visa',\n    description: 'Tạo đơn và quản lý'\n  },\n  [UserRole.STUDENT]: {\n    primary: '/dashboard/student',\n    secondary: '/dashboard/visa/create',\n    description: 'Gia hạn visa và thủ tục'\n  },\n  [UserRole.SPECIALIST]: {\n    primary: '/dashboard/specialist',\n    secondary: '/dashboard/specialist/visa-review',\n    description: 'Xét duyệt và xử lý'\n  },\n  [UserRole.MANAGER]: {\n    primary: '/dashboard/manager',\n    secondary: '/dashboard/manager/visa-approval',\n    description: 'Phê duyệt và ký duyệt'\n  },\n  [UserRole.VIEWER]: {\n    primary: '/dashboard/viewer',\n    secondary: '/dashboard/viewer/visa-lookup',\n    description: 'Tra cứu thông tin'\n  },\n  [UserRole.SYSTEM]: {\n    primary: '/dashboard',\n    secondary: '/dashboard',\n    description: 'Hệ thống tự động'\n  }\n});\n\n/**\n * Check if a user can access a specific route based on their role\n */\nexport const canAccessRoute = (userRole: UserRoleType, route: string): boolean => {\n  // Admin can access everything\n  if (userRole === UserRole.ADMIN) {\n    return true;\n  }\n\n  // Define role-specific route patterns\n  const routePermissions = {\n    [UserRole.USER]: [\n      '/dashboard',\n      '/dashboard/visa',\n      '/dashboard/mou',\n      '/dashboard/translation',\n      '/dashboard/visitor'\n    ],\n    [UserRole.STUDENT]: [\n      '/dashboard',\n      '/dashboard/student',\n      '/dashboard/visa/create',\n      '/dashboard/visa/my',\n      '/dashboard/student/guide',\n      '/dashboard/student/appointments'\n    ],\n    [UserRole.SPECIALIST]: [\n      '/dashboard',\n      '/dashboard/specialist',\n      '/dashboard/specialist/visa-review',\n      '/dashboard/specialist/mou-review',\n      '/dashboard/specialist/translation',\n      '/dashboard/specialist/reports',\n      '/dashboard/visa',\n      '/dashboard/mou',\n      '/dashboard/translation',\n      '/dashboard/visitor'\n    ],\n    [UserRole.MANAGER]: [\n      '/dashboard',\n      '/dashboard/manager',\n      '/dashboard/manager/visa-approval',\n      '/dashboard/manager/mou-signing',\n      '/dashboard/manager/visitor-approval',\n      '/dashboard/manager/statistics',\n      '/dashboard/manager/export',\n      '/dashboard/visa',\n      '/dashboard/mou',\n      '/dashboard/translation',\n      '/dashboard/visitor'\n    ],\n    [UserRole.VIEWER]: [\n      '/dashboard',\n      '/dashboard/viewer',\n      '/dashboard/viewer/visa-lookup',\n      '/dashboard/viewer/mou-lookup',\n      '/dashboard/viewer/visitor-lookup',\n      '/dashboard/viewer/public-stats'\n    ],\n    [UserRole.SYSTEM]: [\n      '/dashboard'\n    ]\n  };\n\n  const allowedRoutes = routePermissions[userRole] || [];\n  \n  // Check if the route starts with any allowed pattern\n  return allowedRoutes.some(allowedRoute => \n    route === allowedRoute || route.startsWith(allowedRoute + '/')\n  );\n};\n\n/**\n * Redirect to appropriate page if user doesn't have access\n */\nexport const getRedirectUrl = (userRole: UserRoleType, attemptedRoute: string): string => {\n  if (canAccessRoute(userRole, attemptedRoute)) {\n    return attemptedRoute;\n  }\n  \n  // If user can't access the route, redirect to their default dashboard\n  return getDashboardUrl(userRole);\n};\n"],"names":[],"mappings":";;;;;;AAAA;;AAKO,MAAM,kBAAkB,CAAC;IAC9B,OAAQ;QACN,KAAK,iIAAA,CAAA,WAAQ,CAAC,KAAK;YACjB,OAAO;QACT,KAAK,iIAAA,CAAA,WAAQ,CAAC,OAAO;YACnB,OAAO;QACT,KAAK,iIAAA,CAAA,WAAQ,CAAC,UAAU;YACtB,OAAO;QACT,KAAK,iIAAA,CAAA,WAAQ,CAAC,OAAO;YACnB,OAAO;QACT,KAAK,iIAAA,CAAA,WAAQ,CAAC,MAAM;YAClB,OAAO;QACT,KAAK,iIAAA,CAAA,WAAQ,CAAC,IAAI;QAClB;YACE,OAAO;IACX;AACF;AAKO,MAAM,sBAAsB,IAAM,CAAC;QACxC,CAAC,iIAAA,CAAA,WAAQ,CAAC,KAAK,CAAC,EAAE;YAChB,SAAS;YACT,WAAW;YACX,aAAa;QACf;QACA,CAAC,iIAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,EAAE;YACf,SAAS;YACT,WAAW;YACX,aAAa;QACf;QACA,CAAC,iIAAA,CAAA,WAAQ,CAAC,OAAO,CAAC,EAAE;YAClB,SAAS;YACT,WAAW;YACX,aAAa;QACf;QACA,CAAC,iIAAA,CAAA,WAAQ,CAAC,UAAU,CAAC,EAAE;YACrB,SAAS;YACT,WAAW;YACX,aAAa;QACf;QACA,CAAC,iIAAA,CAAA,WAAQ,CAAC,OAAO,CAAC,EAAE;YAClB,SAAS;YACT,WAAW;YACX,aAAa;QACf;QACA,CAAC,iIAAA,CAAA,WAAQ,CAAC,MAAM,CAAC,EAAE;YACjB,SAAS;YACT,WAAW;YACX,aAAa;QACf;QACA,CAAC,iIAAA,CAAA,WAAQ,CAAC,MAAM,CAAC,EAAE;YACjB,SAAS;YACT,WAAW;YACX,aAAa;QACf;IACF,CAAC;AAKM,MAAM,iBAAiB,CAAC,UAAwB;IACrD,8BAA8B;IAC9B,IAAI,aAAa,iIAAA,CAAA,WAAQ,CAAC,KAAK,EAAE;QAC/B,OAAO;IACT;IAEA,sCAAsC;IACtC,MAAM,mBAAmB;QACvB,CAAC,iIAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,EAAE;YACf;YACA;YACA;YACA;YACA;SACD;QACD,CAAC,iIAAA,CAAA,WAAQ,CAAC,OAAO,CAAC,EAAE;YAClB;YACA;YACA;YACA;YACA;YACA;SACD;QACD,CAAC,iIAAA,CAAA,WAAQ,CAAC,UAAU,CAAC,EAAE;YACrB;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,CAAC,iIAAA,CAAA,WAAQ,CAAC,OAAO,CAAC,EAAE;YAClB;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,CAAC,iIAAA,CAAA,WAAQ,CAAC,MAAM,CAAC,EAAE;YACjB;YACA;YACA;YACA;YACA;YACA;SACD;QACD,CAAC,iIAAA,CAAA,WAAQ,CAAC,MAAM,CAAC,EAAE;YACjB;SACD;IACH;IAEA,MAAM,gBAAgB,gBAAgB,CAAC,SAAS,IAAI,EAAE;IAEtD,qDAAqD;IACrD,OAAO,cAAc,IAAI,CAAC,CAAA,eACxB,UAAU,gBAAgB,MAAM,UAAU,CAAC,eAAe;AAE9D;AAKO,MAAM,iBAAiB,CAAC,UAAwB;IACrD,IAAI,eAAe,UAAU,iBAAiB;QAC5C,OAAO;IACT;IAEA,sEAAsE;IACtE,OAAO,gBAAgB;AACzB","debugId":null}},
    {"offset": {"line": 686, "column": 0}, "map": {"version":3,"sources":["file:///F:/pbl6_ql_htqt/front-end/src/app/login/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { authAPI } from '@/lib/api-client'\r\nimport { authHelpers } from '@/lib/auth'\r\nimport { UserRole, UserRoleType } from '@/hooks/usePermissions'\r\nimport { getDashboardUrl } from '@/lib/role-navigation'\r\n\r\nexport default function LoginPage() {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState('')\r\n  const router = useRouter()\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setIsLoading(true)\r\n    setError('')\r\n\r\n    try {\r\n      // Call real API\r\n      const response = await authAPI.login(email, password)\r\n      \r\n      if (response.access_token && response.user) {\r\n        // Store token and user info\r\n        authHelpers.setToken(response.access_token)\r\n        authHelpers.setUser(response.user)\r\n        \r\n        // Get user role from response\r\n        const userRole = response.user.role || response.user.roles?.[0]?.name || UserRole.USER\r\n        \r\n        // Redirect to appropriate dashboard based on role\r\n        const dashboardUrl = getDashboardUrl(userRole as UserRoleType)\r\n        \r\n        console.log(`Redirecting ${userRole} to: ${dashboardUrl}`)\r\n        router.push(dashboardUrl)\r\n      } else {\r\n        setError('Phản hồi từ server không hợp lệ')\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Login error:', error)\r\n      if (error.response?.status === 401) {\r\n        setError('Email hoặc mật khẩu không đúng')\r\n      } else if (error.response?.data?.message) {\r\n        setError(error.response.data.message)\r\n      } else if (error.code === 'ECONNREFUSED' || error.message.includes('Network Error')) {\r\n        setError('Không thể kết nối đến server. Vui lòng kiểm tra backend có đang chạy không.')\r\n      } else {\r\n        setError('Đăng nhập thất bại. Vui lòng thử lại.')\r\n      }\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleClearData = () => {\r\n    authHelpers.removeToken()\r\n    authHelpers.removeUser()\r\n    localStorage.clear()\r\n    setError('')\r\n    alert('Đã xóa dữ liệu cache. Vui lòng thử đăng nhập lại.')\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        <div>\r\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n            Đăng nhập hệ thống\r\n          </h2>\r\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n            PBL6 - Hệ thống Quản lý Hợp tác Quốc tế\r\n          </p>\r\n          <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\r\n            <h3 className=\"text-sm font-medium text-blue-800 mb-2\">Thông tin đăng nhập:</h3>\r\n            <div className=\"text-xs text-blue-700 space-y-1\">\r\n              <p>• <strong>Email:</strong> admin@htqt.edu.vn</p>\r\n              <p>• <strong>Mật khẩu:</strong> 123456</p>\r\n              <p className=\"mt-2 text-red-600\">\r\n                <strong>Lưu ý:</strong> Backend phải chạy trên localhost:3001\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\r\n          <div className=\"rounded-md shadow-sm -space-y-px\">\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"sr-only\">\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                autoComplete=\"email\"\r\n                required\r\n                className=\"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                placeholder=\"Địa chỉ email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"sr-only\">\r\n                Mật khẩu\r\n              </label>\r\n              <input\r\n                id=\"password\"\r\n                name=\"password\"\r\n                type=\"password\"\r\n                autoComplete=\"current-password\"\r\n                required\r\n                className=\"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\r\n                placeholder=\"Mật khẩu\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"text-red-600 text-sm text-center\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <div>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {isLoading ? 'Đang đăng nhập...' : 'Đăng nhập'}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Clear Data Button */}\r\n          <div className=\"text-center\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleClearData}\r\n              className=\"text-sm text-gray-500 hover:text-gray-700 underline\"\r\n            >\r\n              Xóa dữ liệu cache (nếu gặp lỗi)\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}