{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///F:/pbl6_ql_htqt/front-end/src/lib/api-client.ts"],"sourcesContent":["import axios from 'axios'\r\n\r\n// Create axios instance with default config\r\nconst apiClient = axios.create({\r\n  baseURL: 'http://localhost:3001/api/v1',\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n})\r\n\r\n// Add request interceptor to include auth token\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token')\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`\r\n    }\r\n    return config\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Add response interceptor to handle errors\r\napiClient.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      // Token expired or invalid\r\n      localStorage.removeItem('token')\r\n      localStorage.removeItem('user')\r\n      window.location.href = '/login'\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Auth API\r\nexport const authAPI = {\r\n  login: async (email: string, password: string) => {\r\n    const response = await apiClient.post('/auth/login', {\r\n      email,\r\n      password,\r\n    })\r\n    return response.data\r\n  },\r\n  \r\n  loginByUsername: async (username: string, password: string) => {\r\n    const response = await apiClient.post('/auth/login', {\r\n      username,\r\n      password,\r\n    })\r\n    return response.data\r\n  },\r\n  \r\n  logout: async () => {\r\n    const response = await apiClient.post('/auth/logout')\r\n    return response.data\r\n  },\r\n  \r\n  getProfile: async () => {\r\n    const response = await apiClient.get('/auth/profile')\r\n    return response.data\r\n  },\r\n  \r\n  refreshToken: async () => {\r\n    const response = await apiClient.post('/auth/refresh')\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Users API\r\nexport const usersAPI = {\r\n  getUsers: async () => {\r\n    const response = await apiClient.get('/users')\r\n    return response.data\r\n  },\r\n  \r\n  getUser: async (id: string) => {\r\n    const response = await apiClient.get(`/users/${id}`)\r\n    return response.data\r\n  },\r\n  \r\n  createUser: async (userData: any) => {\r\n    const response = await apiClient.post('/users', userData)\r\n    return response.data\r\n  },\r\n  \r\n  updateUser: async (id: string, userData: any) => {\r\n    const response = await apiClient.put(`/users/${id}`, userData)\r\n    return response.data\r\n  },\r\n  \r\n  deleteUser: async (id: string) => {\r\n    const response = await apiClient.delete(`/users/${id}`)\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Visitors API\r\nexport const visitorsAPI = {\r\n  getVisitors: async () => {\r\n    const response = await apiClient.get('/visitors')\r\n    return response.data\r\n  },\r\n  \r\n  getVisitor: async (id: string) => {\r\n    const response = await apiClient.get(`/visitors/${id}`)\r\n    return response.data\r\n  },\r\n  \r\n  createVisitor: async (visitorData: any) => {\r\n    const response = await apiClient.post('/visitors', visitorData)\r\n    return response.data\r\n  },\r\n  \r\n  updateVisitor: async (id: string, visitorData: any) => {\r\n    const response = await apiClient.put(`/visitors/${id}`, visitorData)\r\n    return response.data\r\n  },\r\n  \r\n  deleteVisitor: async (id: string) => {\r\n    const response = await apiClient.delete(`/visitors/${id}`)\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Translation Requests API\r\nexport const translationAPI = {\r\n  getTranslationRequests: async () => {\r\n    const response = await apiClient.get('/translation-requests')\r\n    return response.data\r\n  },\r\n  \r\n  getTranslationRequest: async (id: string) => {\r\n    const response = await apiClient.get(`/translation-requests/${id}`)\r\n    return response.data\r\n  },\r\n  \r\n  createTranslationRequest: async (requestData: any) => {\r\n    const response = await apiClient.post('/translation-requests', requestData)\r\n    return response.data\r\n  },\r\n  \r\n  updateTranslationRequest: async (id: string, requestData: any) => {\r\n    const response = await apiClient.put(`/translation-requests/${id}`, requestData)\r\n    return response.data\r\n  },\r\n  \r\n  deleteTranslationRequest: async (id: string) => {\r\n    const response = await apiClient.delete(`/translation-requests/${id}`)\r\n    return response.data\r\n  },\r\n}\r\n\r\nexport default apiClient"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///F:/pbl6_ql_htqt/front-end/src/hooks/useAuth.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect, createContext, useContext, ReactNode } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport Cookies from 'js-cookie'\r\nimport apiClient from '@/lib/api-client'\r\n\r\ninterface User {\r\n  id: string\r\n  email: string\r\n  fullName?: string\r\n  role: string\r\n  avatar?: string\r\n  department?: string\r\n  phone?: string\r\n  status: string\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null\r\n  token: string | null\r\n  isLoading: boolean\r\n  login: (email: string, password: string) => Promise<void>\r\n  logout: () => void\r\n  refreshUser: () => Promise<void>\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [token, setToken] = useState<string | null>(null)\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const router = useRouter()\r\n\r\n  useEffect(() => {\r\n    const initAuth = async () => {\r\n      const savedToken = Cookies.get('auth-token')\r\n      if (savedToken) {\r\n        setToken(savedToken)\r\n        apiClient.defaults.headers.common['Authorization'] = `Bearer ${savedToken}`\r\n        \r\n        try {\r\n          const response = await apiClient.get('/users/profile')\r\n          setUser(response.data)\r\n        } catch (error) {\r\n          console.error('Failed to fetch user profile:', error)\r\n          Cookies.remove('auth-token')\r\n          setToken(null)\r\n          delete apiClient.defaults.headers.common['Authorization']\r\n        }\r\n      }\r\n      setIsLoading(false)\r\n    }\r\n\r\n    initAuth()\r\n  }, [])\r\n\r\n  const login = async (email: string, password: string) => {\r\n    try {\r\n      const response = await apiClient.post('/auth/login', { email, password })\r\n      const { access_token, user: userData } = response.data\r\n      \r\n      setToken(access_token)\r\n      setUser(userData)\r\n      \r\n      Cookies.set('auth-token', access_token, { expires: 7 })\r\n      apiClient.defaults.headers.common['Authorization'] = `Bearer ${access_token}`\r\n    } catch (error) {\r\n      throw error\r\n    }\r\n  }\r\n\r\n  const logout = () => {\r\n    setUser(null)\r\n    setToken(null)\r\n    Cookies.remove('auth-token')\r\n    delete apiClient.defaults.headers.common['Authorization']\r\n  }\r\n\r\n  const refreshUser = async () => {\r\n    if (!token) return\r\n    \r\n    try {\r\n      const response = await apiClient.get('/users/profile')\r\n      setUser(response.data)\r\n    } catch (error) {\r\n      console.error('Failed to refresh user:', error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={{\r\n      user,\r\n      token,\r\n      isLoading,\r\n      login,\r\n      logout,\r\n      refreshUser\r\n    }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext)\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider')\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AA2BA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EAA+B;AAExD,SAAS,aAAa,KAAqC;QAArC,EAAE,QAAQ,EAA2B,GAArC;;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM;mDAAW;oBACf,MAAM,aAAa,wJAAA,CAAA,UAAO,CAAC,GAAG,CAAC;oBAC/B,IAAI,YAAY;wBACd,SAAS;wBACT,8HAAA,CAAA,UAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,AAAC,UAAoB,OAAX;wBAE/D,IAAI;4BACF,MAAM,WAAW,MAAM,8HAAA,CAAA,UAAS,CAAC,GAAG,CAAC;4BACrC,QAAQ,SAAS,IAAI;wBACvB,EAAE,OAAO,OAAO;4BACd,QAAQ,KAAK,CAAC,iCAAiC;4BAC/C,wJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;4BACf,SAAS;4BACT,OAAO,8HAAA,CAAA,UAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;wBAC3D;oBACF;oBACA,aAAa;gBACf;;YAEA;QACF;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,IAAI;YACF,MAAM,WAAW,MAAM,8HAAA,CAAA,UAAS,CAAC,IAAI,CAAC,eAAe;gBAAE;gBAAO;YAAS;YACvE,MAAM,EAAE,YAAY,EAAE,MAAM,QAAQ,EAAE,GAAG,SAAS,IAAI;YAEtD,SAAS;YACT,QAAQ;YAER,wJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,cAAc,cAAc;gBAAE,SAAS;YAAE;YACrD,8HAAA,CAAA,UAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,AAAC,UAAsB,OAAb;QACjE,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,MAAM,SAAS;QACb,QAAQ;QACR,SAAS;QACT,wJAAA,CAAA,UAAO,CAAC,MAAM,CAAC;QACf,OAAO,8HAAA,CAAA,UAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;IAC3D;IAEA,MAAM,cAAc;QAClB,IAAI,CAAC,OAAO;QAEZ,IAAI;YACF,MAAM,WAAW,MAAM,8HAAA,CAAA,UAAS,CAAC,GAAG,CAAC;YACrC,QAAQ,SAAS,IAAI;QACvB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QAC3C;IACF;IAEA,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAC3B;YACA;YACA;YACA;YACA;YACA;QACF;kBACG;;;;;;AAGP;GA1EgB;;QAIC,qIAAA,CAAA,YAAS;;;KAJV;AA4ET,SAAS;;IACd,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB","debugId":null}}]
}