(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{221:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(5155),s=r(2115),i=r(5695),a=r(1056);let o=[{name:"Bi\xean bản ghi nhớ (MOU)",href:"/dashboard/mou",icon:"\uD83D\uDCC4"},{name:"Hồ sơ Visa",href:"/dashboard/visa",icon:"\uD83D\uDCCB"},{name:"Đo\xe0n kh\xe1ch quốc tế",href:"/dashboard/visitor",icon:"\uD83D\uDC65"},{name:"X\xe1c nhận bản dịch",href:"/dashboard/translation",icon:"\uD83D\uDCDD"}];function c(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[l,d]=(0,s.useState)(!0),u=(0,i.useRouter)(),m=(0,i.usePathname)();return((0,s.useEffect)(()=>{let e=a._.getToken(),t=a._.getUser();if(!e||!t)return void u.push("/login");c(t),d(!1)},[u]),l)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Đang tải..."})]})}):r?(0,n.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,n.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"PBL6 - Hệ thống Quản l\xfd HTQT"})}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,n.jsx)("span",{className:"font-medium",children:r.fullName}),(0,n.jsxs)("span",{className:"text-gray-500 ml-2",children:["(",r.role,")"]})]}),(0,n.jsx)("button",{onClick:()=>{a._.logout()},className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md text-sm font-medium",children:"Đăng xuất"})]})]})})}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("aside",{className:"w-64 bg-white shadow-sm min-h-screen",children:(0,n.jsx)("nav",{className:"mt-8",children:(0,n.jsx)("div",{className:"px-4 space-y-2",children:o.map(e=>(0,n.jsxs)("a",{href:e.href,className:"flex items-center px-4 py-2 text-sm font-medium rounded-md ".concat(m===e.href?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100"),children:[(0,n.jsx)("span",{className:"mr-3",children:e.icon}),e.name]},e.href))})})}),(0,n.jsx)("main",{className:"flex-1 p-8",children:t})]})]}):null}},1056:(e,t,r)=>{"use strict";r.d(t,{_:()=>s});var n=r(7383);let s={getToken:()=>n.A.get("token")||null,setToken:e=>{n.A.set("token",e,{expires:7})},removeToken:()=>{n.A.remove("token"),n.A.remove("user")},getUser:()=>{{let e=n.A.get("user");if(e)try{return JSON.parse(e)}catch(e){console.error("Error parsing user data:",e)}}return null},setUser:e=>{n.A.set("user",JSON.stringify(e),{expires:7})},isAuthenticated:()=>!!s.getToken(),hasRole:e=>{let t=s.getUser();return(null==t?void 0:t.role)===e},hasAnyRole:e=>{let t=s.getUser();return!!t&&e.includes(t.role)},logout:()=>{s.removeToken(),window.location.href="/login"}}},1716:(e,t,r)=>{Promise.resolve().then(r.bind(r,221))},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},7383:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>s});var s=function e(t,r){function s(e,s,i){if("undefined"!=typeof document){"number"==typeof(i=n({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var o in i)i[o]&&(a+="; "+o,!0!==i[o]&&(a+="="+i[o].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+a}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},s=0;s<r.length;s++){var i=r[s].split("="),a=i.slice(1).join("=");try{var o=decodeURIComponent(i[0]);if(n[o]=t.read(a,o),e===o)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){s(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},e=>{e.O(0,[441,964,358],()=>e(e.s=1716)),_N_E=e.O()}]);