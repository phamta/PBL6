(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{98:(e,t,s)=>{"use strict";s.d(t,{K6:()=>l,R2:()=>i,VZ:()=>u,sp:()=>d,wR:()=>c});var r=s(3464),a=s(7383);let o=s(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api/v1",n=r.A.create({baseURL:o,timeout:1e4,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=a.A.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(a.A.remove("token"),a.A.remove("user"),window.location.href="/login"),Promise.reject(e)});let i={login:(e,t)=>n.post("/auth/login",{email:e,password:t}),register:e=>n.post("/auth/register",e)},l={getMOUs:()=>n.get("/mou"),getMOU:e=>n.get("/mou/".concat(e)),createMOU:e=>n.post("/mou",e),updateMOU:(e,t)=>n.patch("/mou/".concat(e),t),deleteMOU:e=>n.delete("/mou/".concat(e))},c={getVisaApplications:()=>n.get("/visa"),getMyApplications:()=>n.get("/visa/my-applications"),getVisaApplication:e=>n.get("/visa/".concat(e)),createVisaApplication:e=>n.post("/visa",e),updateVisaApplication:(e,t)=>n.patch("/visa/".concat(e),t),deleteVisaApplication:e=>n.delete("/visa/".concat(e))},u={getVisitors:()=>n.get("/visitor"),getVisitor:e=>n.get("/visitor/".concat(e)),createVisitor:e=>n.post("/visitor",e),updateVisitor:(e,t)=>n.patch("/visitor/".concat(e),t),deleteVisitor:e=>n.delete("/visitor/".concat(e))},d={getTranslations:()=>n.get("/translation"),getTranslation:e=>n.get("/translation/".concat(e)),createTranslation:e=>n.post("/translation",e),updateTranslation:(e,t)=>n.patch("/translation/".concat(e),t),deleteTranslation:e=>n.delete("/translation/".concat(e))}},608:(e,t,s)=>{Promise.resolve().then(s.bind(s,8007))},1056:(e,t,s)=>{"use strict";s.d(t,{_:()=>a});var r=s(7383);let a={getToken:()=>r.A.get("token")||null,setToken:e=>{r.A.set("token",e,{expires:7})},removeToken:()=>{r.A.remove("token"),r.A.remove("user")},getUser:()=>{{let e=r.A.get("user");if(e)try{return JSON.parse(e)}catch(e){console.error("Error parsing user data:",e)}}return null},setUser:e=>{r.A.set("user",JSON.stringify(e),{expires:7})},isAuthenticated:()=>!!a.getToken(),hasRole:e=>{let t=a.getUser();return(null==t?void 0:t.role)===e},hasAnyRole:e=>{let t=a.getUser();return!!t&&e.includes(t.role)},logout:()=>{a.removeToken(),window.location.href="/login"}}},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},8007:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(5155),a=s(2115),o=s(5695),n=s(98),i=s(1056);function l(){let[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[d,p]=(0,a.useState)(""),g=(0,o.useRouter)(),m=async t=>{t.preventDefault(),u(!0),p("");try{let{access_token:t,user:r}=(await n.R2.login(e,s)).data;i._.setToken(t),i._.setUser(r),g.push("/dashboard")}catch(e){var r,a;p((null==(a=e.response)||null==(r=a.data)?void 0:r.message)||"Đăng nhập thất bại")}finally{u(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Đăng nhập hệ thống"}),(0,r.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"PBL6 - Hệ thống Quản l\xfd Hợp t\xe1c Quốc tế"})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:m,children:[(0,r.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email"}),(0,r.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Địa chỉ email",value:e,onChange:e=>t(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Mật khẩu"}),(0,r.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Mật khẩu",value:s,onChange:e=>l(e.target.value)})]})]}),d&&(0,r.jsx)("div",{className:"text-red-600 text-sm text-center",children:d}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Đang đăng nhập...":"Đăng nhập"})})]})]})})}}},e=>{e.O(0,[122,441,964,358],()=>e(e.s=608)),_N_E=e.O()}]);