"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5529],{285:(e,t,r)=>{r.d(t,{$:()=>d});var a=r(5155),o=r(2115),s=r(9708),i=r(2085),n=r(9434);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef((e,t)=>{let{className:r,variant:o,size:i,asChild:d=!1,...u}=e,c=d?s.DX:"button";return(0,a.jsx)(c,{className:(0,n.cn)(l({variant:o,size:i,className:r})),ref:t,...u})});d.displayName="Button"},381:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(9946).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5695:(e,t,r)=>{var a=r(8999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},5731:(e,t,r)=>{r.d(t,{KB:()=>d,PE:()=>u,Sn:()=>i,ZQ:()=>l,vQ:()=>c});var a=r(3464);let o="http://localhost:3001/api/v1",s=a.A.create({baseURL:o,timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!0});s.interceptors.request.use(e=>{var t;let r=localStorage.getItem("token");return r&&(e.headers.Authorization="Bearer ".concat(r)),console.log("\uD83D\uDE80 API Request: ".concat(null==(t=e.method)?void 0:t.toUpperCase()," ").concat(e.url)),e},e=>(console.error("❌ Request Error:",e),Promise.reject(e))),s.interceptors.response.use(e=>{var t;return console.log("✅ API Response: ".concat(null==(t=e.config.method)?void 0:t.toUpperCase()," ").concat(e.config.url," - ").concat(e.status)),e},e=>{var t;return console.error("❌ Response Error:",e),(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});let i={auth:{login:"/auth/login",logout:"/auth/logout",profile:"/auth/profile",refresh:"/auth/refresh"},admin:{users:"/admin/users",roles:"/admin/roles",systemLogs:"/admin/system-logs",statistics:"/admin/statistics"},mou:{base:"/mou",export:"/reports/mou/excel"},visa:{base:"/visa",export:"/reports/visa/excel"},visitor:{base:"/visitor",export:"/reports/visitor/excel"},translation:{base:"/translation",export:"/reports/translation/excel"},reports:{dashboard:"/reports/dashboard",export:"/reports/export"}},n={get:async(e,t)=>(await s.get(e,t)).data,post:async(e,t,r)=>(await s.post(e,t,r)).data},l={login:async e=>n.post(i.auth.login,e),logout:async()=>n.post(i.auth.logout),getProfile:async()=>n.get(i.auth.profile),refreshToken:async()=>n.post(i.auth.refresh)},d=(e,t)=>{let r=new URL(e,o);return t&&Object.entries(t).forEach(e=>{let[t,a]=e;r.searchParams.append(t,String(a))}),r.toString()},u=async(e,t)=>{let r=localStorage.getItem("token"),a=await fetch(d(e),{headers:{Authorization:"Bearer ".concat(r)}});if(a.ok){let e=await a.blob(),r=window.URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download=t,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(r),document.body.removeChild(o)}else throw Error("Download failed")},c={name:"Hệ thống Quản l\xfd Hợp t\xe1c Quốc tế",universityName:"Trường Đại học B\xe1ch Khoa Đ\xe0 Nẵng",version:"1.0.0",pagination:{defaultPageSize:10,maxPageSize:100}}},6695:(e,t,r)=>{r.d(t,{BT:()=>d,Wu:()=>u,ZB:()=>l,Zp:()=>i,aR:()=>n});var a=r(5155),o=r(2115),s=r(9434);let i=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...o})});i.displayName="Card";let n=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...o})});n.displayName="CardHeader";let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...o})});l.displayName="CardTitle";let d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...o})});d.displayName="CardDescription";let u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...o})});u.displayName="CardContent",o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...o})}).displayName="CardFooter"},8497:(e,t,r)=>{r.d(t,{S:()=>i,g:()=>o});var a=r(9323);let o={ADMIN:"admin",USER:"user",STUDENT:"student",SPECIALIST:"specialist",MANAGER:"manager",VIEWER:"viewer",SYSTEM:"system"},s={[o.ADMIN]:["user:create","user:read","user:update","user:delete","user:assign_role","system:config","system:backup","system:logs","data:view_all","report:view","report:export","report:stats","notification:manage","visa:create","visa:read","visa:update","visa:delete","visa:review","visa:approve","visa:reject","visa:assign","visa:export","mou:create","mou:read","mou:update","mou:delete","mou:review","mou:approve","mou:sign","mou:terminate","mou:assign","mou:export","translation:create","translation:read","translation:update","translation:delete","translation:review","translation:approve","translation:certify","visitor:create","visitor:read","visitor:update","visitor:delete","visitor:approve","visitor:export"],[o.USER]:["data:view_department","visa:create","visa:read","visa:update","mou:create","mou:read","mou:update","translation:create","translation:read","translation:update","visitor:create","visitor:read","visitor:update"],[o.STUDENT]:["data:view_own","visa:create","visa:read","visa:update"],[o.SPECIALIST]:["data:view_all","visa:read","visa:review","visa:assign","mou:read","mou:review","mou:assign","translation:read","translation:review","translation:certify","visitor:read","visitor:update","report:view","report:export"],[o.MANAGER]:["data:view_all","visa:read","visa:approve","visa:reject","visa:export","mou:read","mou:approve","mou:sign","mou:terminate","mou:export","translation:read","translation:approve","visitor:read","visitor:approve","visitor:export","report:view","report:export","report:stats"],[o.VIEWER]:["data:view_public","visa:read","mou:read","translation:read","visitor:read","report:view"],[o.SYSTEM]:["notification:send","data:view_all","visa:read","mou:read"]},i=()=>{let e=a._.getUser(),t=t=>!!(null==e?void 0:e.role)&&(s[e.role]||[]).includes(t),r=t=>{if(!(null==e?void 0:e.role))return!1;let r=s[e.role]||[];return t.some(e=>r.includes(e))};return{hasPermission:t,hasAnyPermission:r,hasAllPermissions:t=>{if(!(null==e?void 0:e.role))return!1;let r=s[e.role]||[];return t.every(e=>r.includes(e))},canAccessData:e=>{switch(e){case"own":return r(["data:view_own","data:view_department","data:view_all"]);case"department":return r(["data:view_department","data:view_all"]);case"all":return t("data:view_all");case"public":return r(["data:view_public","data:view_own","data:view_department","data:view_all"]);default:return!1}},canAccessModule:(e,r)=>t("".concat(e,":").concat(r)),getRoleDisplayName:e=>({[o.ADMIN]:"Admin CNTT",[o.USER]:"Người d\xf9ng cơ sở",[o.STUDENT]:"Sinh vi\xean/Học vi\xean quốc tế",[o.SPECIALIST]:"Chuy\xean vi\xean HTQT/KHCN&ĐN",[o.MANAGER]:"L\xe3nh đạo Ph\xf2ng",[o.VIEWER]:"Người d\xf9ng tra cứu",[o.SYSTEM]:"Hệ thống"})[e]||e||"Kh\xf4ng x\xe1c định",can:{createUser:()=>t("user:create"),manageUsers:()=>t("user:read"),assignRoles:()=>t("user:assign_role"),configureSystem:()=>t("system:config"),viewSystemLogs:()=>t("system:logs"),createMOU:()=>t("mou:create"),viewMOU:()=>t("mou:read"),editMOU:()=>t("mou:update"),deleteMOU:()=>t("mou:delete"),reviewMOU:()=>t("mou:review"),approveMOU:()=>t("mou:approve"),signMOU:()=>t("mou:sign"),terminateMOU:()=>t("mou:terminate"),exportMOU:()=>t("mou:export"),createVisa:()=>t("visa:create"),viewVisa:()=>t("visa:read"),editVisa:()=>t("visa:update"),deleteVisa:()=>t("visa:delete"),reviewVisa:()=>t("visa:review"),approveVisa:()=>t("visa:approve"),rejectVisa:()=>t("visa:reject"),exportVisa:()=>t("visa:export"),createTranslation:()=>t("translation:create"),viewTranslation:()=>t("translation:read"),editTranslation:()=>t("translation:update"),deleteTranslation:()=>t("translation:delete"),reviewTranslation:()=>t("translation:review"),approveTranslation:()=>t("translation:approve"),certifyTranslation:()=>t("translation:certify"),createVisitor:()=>t("visitor:create"),viewVisitor:()=>t("visitor:read"),editVisitor:()=>t("visitor:update"),deleteVisitor:()=>t("visitor:delete"),approveVisitor:()=>t("visitor:approve"),exportVisitor:()=>t("visitor:export"),viewReports:()=>t("report:view"),exportReports:()=>t("report:export"),viewStatistics:()=>t("report:stats")},userRole:null==e?void 0:e.role,isAdmin:(null==e?void 0:e.role)===o.ADMIN,isUser:(null==e?void 0:e.role)===o.USER,isStudent:(null==e?void 0:e.role)===o.STUDENT,isSpecialist:(null==e?void 0:e.role)===o.SPECIALIST,isManager:(null==e?void 0:e.role)===o.MANAGER,isViewer:(null==e?void 0:e.role)===o.VIEWER,isSystem:(null==e?void 0:e.role)===o.SYSTEM}}},9323:(e,t,r)=>{r.d(t,{_:()=>o});var a=r(5731);let o={login:async e=>{try{console.log("\uD83D\uDD11 Attempting login...",{email:e.email});let t=await a.ZQ.login(e);if(t.access_token&&t.user)return o.setToken(t.access_token),o.setUser(t.user),console.log("✅ Login successful"),{success:!0,data:t,message:"Login successful"};return console.log("❌ Login failed: Invalid response format"),{success:!1,message:"Invalid response from server"}}catch(e){var t,r,s,i;return console.error("❌ Login error:",e),{success:!1,message:(null==(r=e.response)||null==(t=r.data)?void 0:t.message)||e.message||"Login failed",errors:(null==(i=e.response)||null==(s=i.data)?void 0:s.errors)||[e.message]}}},setToken:e=>{localStorage.setItem("token",e),document.cookie="token=".concat(e,"; path=/; max-age=86400")},getToken:()=>localStorage.getItem("token"),removeToken:()=>{localStorage.removeItem("token"),document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT"},setUser:e=>{localStorage.setItem("user",JSON.stringify(e)),document.cookie="user=".concat(encodeURIComponent(JSON.stringify(e)),"; path=/; max-age=86400")},getUser:()=>{{let e=localStorage.getItem("user");return e?JSON.parse(e):null}},removeUser:()=>{localStorage.removeItem("user"),document.cookie="user=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT"},isAuthenticated:()=>!!localStorage.getItem("token"),requireAuth:()=>({isLoading:!1,user:null}),hasRole:(e,t)=>t===e||"admin"===t,hasPermission:(e,t)=>"admin"===t,mockLogin:e=>{let t="mock_token_"+Date.now();o.setToken(t),o.setUser({id:1,username:"demo_user",email:"demo@example.com",role:e,name:"Demo User"})},logout:()=>{o.removeToken(),o.removeUser(),window.location.href="/login"}}},9434:(e,t,r)=>{r.d(t,{cn:()=>s});var a=r(2596),o=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.QP)((0,a.$)(t))}}}]);